import{_ as L,r as p,c as f,u as O,o as P,a as o,b as a,i as c,t as r,F as E,d as j,j as y,f as n,m as C}from"./index-BtZz1Nt2.js";import{a as g}from"./azkarService-T1o9ikPn.js";const q={class:"azkar-category-container"},F={class:"category-header"},J={class:"header-info"},M={class:"date"},Q={class:"time"},R={key:0,class:"loading-state"},Z={key:1,class:"error-state"},G={key:2,class:"azkar-list"},H={class:"zikr-header"},K={class:"zikr-number"},U={key:0,class:"repeat-count"},W={class:"zikr-content"},X={key:0,class:"zikr-translation"},Y={key:1,class:"zikr-meta"},z={key:0,class:"reference"},I={key:1,class:"prophet"},tt={class:"zikr-actions"},et={key:0,class:"counter-section"},st={class:"counter-display"},at={class:"current-count"},ot={class:"total-count"},nt=["onClick","disabled"],rt={class:"action-buttons"},lt=["onClick"],ct=["onClick"],it={__name:"AzkarCategoryView",setup(ut){const i=O(),_=p(!0),d=p(null),u=p([]),l=p({}),b=f(()=>{const e=g.categories.find(s=>s.route===i.name);return e?e.name:"الأذكار"}),w=f(()=>["quran-dua","prophets-dua"].includes(i.name)),S=f(()=>Object.keys(l.value).length>0),h=async()=>{try{_.value=!0,d.value=null;const e=g.categories.find(t=>t.route===i.name);if(!e)throw new Error("التصنيف غير موجود");const s=await g.getAzkarByCategory(e.type||e.time);u.value=s,x()}catch(e){console.error("Error loading azkar:",e),d.value="حدث خطأ أثناء تحميل الأذكار"}finally{_.value=!1}},v=()=>{localStorage.setItem(`azkar-progress-${i.name}`,JSON.stringify(l.value))},x=()=>{const e=localStorage.getItem(`azkar-progress-${i.name}`);e&&(l.value=JSON.parse(e))},A=e=>{u.value.find(t=>t.id===e)&&(l.value[e]=(l.value[e]||0)+1,v())},m=e=>{const s=u.value.find(t=>t.id===e);return s?(l.value[e]||0)>=s.count:!1},D=e=>l.value[e]||0,N=e=>{const s=u.value.find(t=>t.id===e);s&&(l.value[e]=s.count,v())},T=()=>{confirm("هل أنت متأكد من إعادة تعيين التقدم؟")&&(l.value={},v())},V=async e=>{try{await navigator.clipboard.writeText(e),alert("تم نسخ الذكر بنجاح")}catch{alert("فشل في نسخ الذكر")}},$=()=>new Date().toLocaleDateString("ar-SA",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),B=()=>new Date().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"});return P(h),(e,s)=>(n(),o("div",q,[a("div",F,[a("h1",null,r(b.value),1),a("div",J,[a("span",M,r($()),1),a("span",Q,r(B()),1)])]),_.value?(n(),o("div",R,s[0]||(s[0]=[a("div",{class:"spinner"},null,-1),a("p",null,"جاري تحميل الأذكار...",-1)]))):d.value?(n(),o("div",Z,[a("p",null,r(d.value),1),a("button",{onClick:h,class:"retry-btn"}," إعادة المحاولة ")])):(n(),o("div",G,[(n(!0),o(E,null,j(u.value,t=>(n(),o("div",{key:t.id,class:C(["zikr-card",{completed:m(t.id)}])},[a("div",H,[a("span",K,"# "+r(t.id),1),t.count>1?(n(),o("span",U,r(t.count)+" مرات ",1)):c("",!0)]),a("div",W,[a("p",{class:C(["zikr-text",{"quran-text":w.value}])},r(t.text),3),t.translation?(n(),o("div",X,r(t.translation),1)):c("",!0),t.reference||t.prophet?(n(),o("div",Y,[t.reference?(n(),o("span",z,[s[1]||(s[1]=a("i",{class:"fas fa-book"},null,-1)),y(" "+r(t.reference),1)])):c("",!0),t.prophet?(n(),o("span",I,[s[2]||(s[2]=a("i",{class:"fas fa-user"},null,-1)),y(" "+r(t.prophet),1)])):c("",!0)])):c("",!0)]),a("div",tt,[t.count>1?(n(),o("div",et,[a("div",st,[a("span",at,r(D(t.id)),1),a("span",ot,"/ "+r(t.count),1)]),a("button",{onClick:k=>A(t.id),disabled:m(t.id),class:"counter-btn"},s[3]||(s[3]=[a("i",{class:"fas fa-plus"},null,-1)]),8,nt)])):c("",!0),a("div",rt,[a("button",{onClick:k=>V(t.text),class:"action-btn",title:"نسخ"},s[4]||(s[4]=[a("i",{class:"fas fa-copy"},null,-1)]),8,lt),m(t.id)?c("",!0):(n(),o("button",{key:0,onClick:k=>N(t.id),class:"action-btn complete-btn",title:"تم"},s[5]||(s[5]=[a("i",{class:"fas fa-check"},null,-1)]),8,ct))])])],2))),128))])),S.value?(n(),o("button",{key:3,onClick:T,class:"reset-all-btn"},s[6]||(s[6]=[a("i",{class:"fas fa-redo"},null,-1),y(" إعادة تعيين التقدم ")]))):c("",!0)]))}},_t=L(it,[["__scopeId","data-v-11246726"]]);export{_t as default};
